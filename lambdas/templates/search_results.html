{%- extends 'index.html' -%}

{%- from "components/search-field/macro.html" import tnaSearchField -%}

{%- set pageTitle = 'Search results' -%}

{% block skipLink %}
  {% if data|length > 0 %}
    {{ tnaSkipLink({
      'href': 'search-results',
      'text': 'Skip to search results'
    }) }}
  {% endif %}
  {{ super() }}
{% endblock %}

{% block content %}
  <div class="tna-!--padding-top-s tna-!--padding-bottom-m tna-background-accent-light">
    <div class="tna-container">
      <div class="tna-column tna-column--width-2-3 tna-column--width-5-6-medium tna-column--full-small tna-column--full-tiny">
        <form action="/results" method="get">
          <div class="tna-form-item">
            <div class="tna-form-item__header">
              <h2 class="tna-form-item__label tna-heading-l">
                <label for="search">
                  Search results
                </label>
              </h2>
            </div>
            <div class="tna-form-item__body">
              <p>Input a file format name or file extension</p>
              <div class="tna-search-field">
                <input type="search" id="search" class="tna-search-field__input" name="q" value="{{ search_term }}" spellcheck="false" placeholder="Input your search term...">
                <button class="tna-button tna-search-field__button" type="submit" title="Search">
                  Search
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="tna-container tna-section">
    <div class="tna-column tna-column--full-medium" id="search-results">
      {% if data|length == 0 %}
        <div class="tna-aside tna-aside--tight tna-background-accent-light">
          <h3 class="tna-heading-m">No results found</h3>
          <p>You can improve your search results by:</p>
          <ul class="tna-ol">
            <li>Double checking your spelling</li>
            <li>Using fewer keywords</li>
          </ul>
        </div>

      {% else %}
      <h3 class="tna-heading-l">Showing {{ data|length }} result{{ 's' if data|length > 1 }} for &quot;{{ search_term }}&quot;</h3>
      <table class="tna-table">
        <thead class="tna-table__head">
          <tr class="tna-table__row">
            <th class="tna-table__header">PUID</th>
            <th class="tna-table__header">Name</th>
            <th class="tna-table__header">File Extensions</th>
          </tr>
        </thead>
        <tbody class="tna-table__body">
          {% for result in data %}
            <tr class="tna-table__row">
              <td class="tna-table__cell"><a href="{{ result.puid }}">{{ result.puid }}</a></td>
              <td class="tna-table__cell">{{ result.name }}</td>
              <td class="tna-table__cell">{{ result.extensions }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      {% endif %}
    </div>
  </div>
{% endblock %}
